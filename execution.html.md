# Execution


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## Progress Parsing

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-ffmpeg-utils/blob/main/cjm_ffmpeg_utils/execution.py#L14"
target="_blank" style="float:right; font-size:smaller">source</a>

### parse_progress_line

>  parse_progress_line (line:str)

*Parse a progress line from ffmpeg stderr output.*

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 38%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>line</td>
<td>str</td>
<td>A line of stderr output from ffmpeg</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>Optional</strong></td>
<td><strong>Current time in seconds, or None if line doesnâ€™t contain
progress info</strong></td>
</tr>
</tbody>
</table>

## FFmpeg Execution with Progress

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-ffmpeg-utils/blob/main/cjm_ffmpeg_utils/execution.py#L44"
target="_blank" style="float:right; font-size:smaller">source</a>

### run_ffmpeg_with_progress

>  run_ffmpeg_with_progress (cmd:List[str],
>                                total_duration:Optional[float]=None,
>                                description:str='Processing',
>                                verbose:bool=False, progress_callback:Optional[
>                                Callable[[float],NoneType]]=None)

*Run an ffmpeg command with a progress bar.*

<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 25%" />
<col style="width: 34%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>cmd</td>
<td>List</td>
<td></td>
<td>List containing the ffmpeg command and arguments</td>
</tr>
<tr>
<td>total_duration</td>
<td>Optional</td>
<td>None</td>
<td>Total duration in seconds for determinate progress, or None for
indeterminate progress</td>
</tr>
<tr>
<td>description</td>
<td>str</td>
<td>Processing</td>
<td>Description text for the progress bar</td>
</tr>
<tr>
<td>verbose</td>
<td>bool</td>
<td>False</td>
<td>If True, shows detailed ffmpeg output</td>
</tr>
<tr>
<td>progress_callback</td>
<td>Optional</td>
<td>None</td>
<td>Optional callback function that receives current progress in seconds
as an argument</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>None</strong></td>
<td></td>
<td><strong>Raises FileNotFoundError or subprocess.CalledProcessError if
ffmpeg command fails</strong></td>
</tr>
</tbody>
</table>

## Testing

``` python
# Test progress line parsing
test_line1 = "out_time_ms=5000000"
assert parse_progress_line(test_line1) == 5.0

test_line2 = "time=00:01:30.00"
assert parse_progress_line(test_line2) == 90.0

test_line3 = "random line"
assert parse_progress_line(test_line3) is None
```
